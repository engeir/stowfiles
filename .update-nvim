#!/bin/sh

PLUGINS="$(nvim --headless -c ':lua MD_PLUGINS()' -c 'q' 2>&1 | sort | sed 's/^\[/- \[/')"
VERSION="$(nvim -v | sed 1q)"
COMMIT=${VERSION#*+g}

echo "# NeoVim Config

This is @engeir's NeoVim config, using $VERSION (view at [latest
commit](https://github.com/neovim/neovim/tree/$COMMIT)). I am currently using the
[packer plugin manager](https://github.com/wbthomason/packer.nvim).

$PLUGINS" >"nvim_lua/.config/nvim/README.md"

sed -i 's/\r//g' "nvim_lua/.config/nvim/README.md"
