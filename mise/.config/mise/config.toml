[env]
BUN_INSTALL = "{{env.HOME}}/.bun" # bun
DENO_INSTALL = "{{env.HOME}}/.deno" # deno
DPRINT_INSTALL = "{{env.HOME}}/.local/bin/" # dprint
RIPGREP_CONFIG_PATH = "{{env.HOME}}/.config/ripgrep/ripgreprc" # ripgrep
RUSH_CONFIG = "{{env.HOME}}/.config/rush/rush.ini" # rush
RYE_HOME = "{{env.HOME}}/.local/share/rye" # rye
_.path = [
  "{{env.HOME}}/.local/share/bob/nvim-bin/",
  "{{env.HOME}}/.local/share/nvim/mason/bin",
  "{{env.HOME}}/.config/emacs/bin",
  "{{env.BUN_INSTALL}}/bin",
  "{{env.DENO_INSTALL}}/bin",
  "{{env.RYE_HOME}}/shims/",
]
_.source = "./machine_specific.sh"
EDITOR = "nvim"
VISUAL = "{{env.EDITOR}}"
TERMINAL = "alacritty"
TERM = "screen-256color" # Needed for italics to work in tmux
PAGER = "less" # Suggested at https://github.com/jarun/nnn/wiki/Advanced-use-cases#pager-as-opener
# LESSOPEN = "|/usr/local/bin/lesspipe.sh %s"  # I'm testing if batpipe from bat-extras is good (instead of lesspipe)
# MANROFFOPT = "-c"  # Fix formatting issue (or just use batman from bat-extras)
# MANPAGER = "sh -c 'col -bx | bat -l man -p'"
BAT_PAGER = "less -R"
LESS = '-Ri '

# NNN
NNN_USE_EDITOR = 1
USE_VIDEOTHUMB = 1
BLK = "34"
CHR = "c9"
DIR = "e6"
EXE = "64"
REG = "fa"
HARDLINK = "81"
SYMLINK = "d6"
MISSING = "f0"
ORPHAN = "00"
FIFO = "06"
SOCK = "00"
OTHER = "58"
NNN_FCOLORS = "{{env.BLK}}{{env.CHR}}{{env.DIR}}{{env.EXE}}{{env.REG}}{{env.HARDLINK}}{{env.SYMLINK}}{{env.MISSING}}{{env.ORPHAN}}{{env.FIFO}}{{env.SOCK}}{{env.OTHER}}"
NNN_FIFO = "/tmp/nnn.fifo nnn"
NNN_TRASH = 1
NNN_TERMINAL = "{{env.TERMINAL}}"
# HEY = "YOU"
# YOU_ONE = "two"
# VERI = "{{ env.YOU_ONE }}"
# YOU_TWO = "{{ get_env(name=env.HEY ~ '_ONE') }}"
# # ubuntu
# NNN_PLUG_UBUNTU = 'a:bookmarks;b:bibfinder;c:diffs;d:dragdrop;f:fzcd;i:ipinfo;j:autojump;m:viewmedia;o:organize;p:preview-tui2;r:rm-send;s:fzplug;u:upload'
# NNN_BMS_UBUNTU = 'b:~/Pictures/;c:~/.config/;d:~/Downloads/;l:~/.local;n:~/Documents/notes_papers/;m:~/stowfiles/;o:~/OneDrive/;p:~/programs/;r:~/science/ref/;s:~/bin/;t:~/Documents/teaching/;w:~/Documents/work/'
# NNN_OPENER_UBUNTU = "/home/een023/.config/nnn/plugins/nuke"
# # darwin (macos)
# NNN_BMS_DARWIN = "b:~/photos/Bilder/Canon EOS M50;c:~/.config;d:~/Downloads;m:~/stowfiles;p:~/programs;s:~/.local/bin;w:~/OneDrive - UiT Office 365/Skole"
# NNN_PLUG_DARWIN = 'a:bookmarks;b:bibfinder;c:diffs;d:dragdrop;f:fzcd;i:ipinfo;j:autojump;m:viewmedia;o:organize;p:preview-tui;r:rm-send;s:fzplug;u:upload'
# NNN_OPENER_DARWIN = ""
# # arch
# NNN_PLUG_ARCH = ""
# NNN_BMS_ARCH = ""
# NNN_OPENER_ARCH = ""
# NNN_PLUG = "{{ get_env(name='NNN_PLUG_' ~ env.MACHINE) }}"
# NNN_BMS = "{{ get_env(name='NNN_BMS_' ~ env.MACHINE) }}"
# NNN_OPENER = "{{ get_env(name='NNN_OPENER_' ~ env.MACHINE) }}"

# FZF settings
FD_OPTIONS = "--follow --exclude .git --exclude node_modules"
FZF_ALT_C_COMMAND = "fd --type d {{env.FD_OPTIONS}}"
FZF_DEFAULT_OPTS = "--no-mouse --layout=reverse --height 100% -1 --multi --inline-info --preview='[[ $(file --mime {}) =~ binary ]] && echo {} is a binary file || (bat --style=numbers --color=always {} || cat {}) 2> /dev/null | head -300' --preview-window='right:hidden:wrap' --bind='f3:execute(bat --style=numbers {} || less -f {}),f2:toggle-preview,ctrl-f:preview-down,ctrl-b:preview-up,ctrl-d:half-page-down,ctrl-u:half-page-up,ctrl-a:select-all+accept,ctrl-y:execute-silent(echo {+} | pbcopy)'"
FZF_DEFAULT_COMMAND = 'fd --type f -I'
FZF_CTRL_T_COMMAND = "{{env.FZF_DEFAULT_COMMAND}}"

HAS_ALLOW_UNSAFE = "y"

# wezterm complains about
# ERROR: ld.so: object 'libgtk3-nocsd.so.0' from LD_PRELOAD cannot be preloaded (failed to map segment from shared object): ignored.
# See https://stackoverflow.com/a/53825858
# LD_PRELOAD = "/usr/lib/x86_64-linux-gnu/libgtk3-nocsd.so.0"

[settings]
experimental = true
yes = true
go_set_gobin = true

[tools]
cabal = "latest" # ghcup is a meta-tool that installs the Haskell toolchain (cabal)
pandoc = "latest"
tinytex = "latest"
watchexec = "latest"
go = "latest"
node = "latest"
python = [
  "latest",
  "sub-0.1:latest",
  "sub-0.2:latest",
  "sub-0.3:latest",
  "sub-0.4:latest",
]
usage = "latest"
"npm:cwebp" = "latest"
"pipx:volcano-cooking" = "latest"
"ubi:Enter-tainer/typstyle" = "latest"
"ubi:ajeetdsouza/zoxide" = "latest"
"ubi:azzamsa/zman" = "latest"
"ubi:etcd-io/etcd" = "latest"
"ubi:filosottile/age" = "latest"
"ubi:goreleaser/goreleaser" = "latest"
"ubi:houseabsolute/precious" = "latest"
"ubi:ismaelgv/rnr" = "latest"
"ubi:junegunn/fzf" = "latest"
"ubi:mgdm/htmlq" = "latest"
"ubi:pvolok/mprocs" = "latest"
"ubi:pythops/bluetui" = "latest"
"ubi:typst/typst" = "latest"
