[mgr]
linemode = "size"
show_hidden = true
show_symlink = true
sort_by = "alphabetical"
sort_dir_first = true
sort_reverse = false
sort_sensitive = false

[opener]
edit = [{ run = '${EDITOR:-nvim} "$@"', block = true, for = "unix" }]
feh = [{ run = 'feh --scale-down "$1"' }]
# nuke = [
#   { run = '~/.config/nnn/plugins/nuke "$1"', desc = "Open", for = "linux" },
# ]

[open]
prepend_rules = [{ mime = "image/*", use = "feh" }, { mime = "*/csv", use = "edit" }]

[preview]
max_width = 1500

[plugin]
prepend_previewers = [
  { name = "*.csv", run = "duckdb" },
  { mime = "*/csv", run = "duckdb" },
  { name = "*.tsv", run = "duckdb" },
  # { name = "*.json", run = "duckdb" },
  # { mime = "*/json", run = "duckdb" },
  { name = "*.parquet", run = "duckdb" },
  { name = "*.txt", run = "duckdb" },
  { name = "*.xlsx", run = "duckdb" },
  { name = "*.db", run = "duckdb" },
  { name = "*.duckdb", run = "duckdb" },
  { mime = "image/heic", run = "heic" },
  { name = "*.nc", run = 'piper -- ncdump-rich --long "$1"' },
]

prepend_preloaders = [
  { name = "*.csv", run = "duckdb", multi = false },
  { name = "*.tsv", run = "duckdb", multi = false },
  { name = "*.json", run = "duckdb", multi = false },
  { name = "*.parquet", run = "duckdb", multi = false },
  { name = "*.txt", run = "duckdb", multi = false },
  { name = "*.xlsx", run = "duckdb", multi = false },
]

[[plugin.prepend_fetchers]]
id = "git"
name = "*"
run = "git"
[[plugin.prepend_fetchers]]
id = "git"
name = "*/"
run = "git"
